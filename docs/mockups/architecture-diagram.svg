<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800" style="font-family: monospace;">
  <!-- Background -->
  <rect width="1000" height="800" fill="#ffffff"/>

  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#1c1c1c">
    Sessions Chronicle - Architecture
  </text>

  <!-- Layer 1: Data Sources -->
  <text x="50" y="80" font-size="14" font-weight="bold" fill="#6e6d6b">Session Files</text>

  <rect x="50" y="100" width="180" height="80" fill="#deddda" rx="8" stroke="#9a9996" stroke-width="2"/>
  <text x="140" y="125" text-anchor="middle" font-size="12" font-weight="bold" fill="#1c1c1c">Claude Code</text>
  <text x="140" y="145" text-anchor="middle" font-size="10" fill="#5e5c64">~/.claude/sessions/</text>
  <text x="140" y="165" text-anchor="middle" font-size="9" fill="#9a9996">*.json</text>

  <rect x="270" y="100" width="180" height="80" fill="#deddda" rx="8" stroke="#9a9996" stroke-width="2"/>
  <text x="360" y="125" text-anchor="middle" font-size="12" font-weight="bold" fill="#1c1c1c">OpenCode</text>
  <text x="360" y="145" text-anchor="middle" font-size="10" fill="#5e5c64">~/.local/share/opencode/</text>
  <text x="360" y="165" text-anchor="middle" font-size="9" fill="#9a9996">*.json</text>

  <rect x="490" y="100" width="180" height="80" fill="#deddda" rx="8" stroke="#9a9996" stroke-width="2"/>
  <text x="580" y="125" text-anchor="middle" font-size="12" font-weight="bold" fill="#1c1c1c">Codex</text>
  <text x="580" y="145" text-anchor="middle" font-size="10" fill="#5e5c64">~/.codex/sessions/</text>
  <text x="580" y="165" text-anchor="middle" font-size="9" fill="#9a9996">*.json</text>

  <!-- Arrows down to Parsers -->
  <path d="M 140 180 L 140 220" stroke="#3584e4" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
  <path d="M 360 180 L 360 220" stroke="#26a269" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"/>
  <path d="M 580 180 L 580 220" stroke="#e66100" stroke-width="2" fill="none" marker-end="url(#arroworange)"/>

  <!-- Layer 2: Parsers -->
  <text x="50" y="215" font-size="14" font-weight="bold" fill="#6e6d6b">Parsers (Rust)</text>

  <rect x="50" y="220" width="180" height="60" fill="#c0e5ff" rx="8" stroke="#3584e4" stroke-width="2"/>
  <text x="140" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">ClaudeCodeParser</text>
  <text x="140" y="260" text-anchor="middle" font-size="9" fill="#5e5c64">parse_metadata()</text>
  <text x="140" y="273" text-anchor="middle" font-size="9" fill="#5e5c64">parse_messages()</text>

  <rect x="270" y="220" width="180" height="60" fill="#c8f4d8" rx="8" stroke="#26a269" stroke-width="2"/>
  <text x="360" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">OpenCodeParser</text>
  <text x="360" y="260" text-anchor="middle" font-size="9" fill="#5e5c64">parse_metadata()</text>
  <text x="360" y="273" text-anchor="middle" font-size="9" fill="#5e5c64">parse_messages()</text>

  <rect x="490" y="220" width="180" height="60" fill="#ffe4c0" rx="8" stroke="#e66100" stroke-width="2"/>
  <text x="580" y="240" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">CodexParser</text>
  <text x="580" y="260" text-anchor="middle" font-size="9" fill="#5e5c64">parse_metadata()</text>
  <text x="580" y="273" text-anchor="middle" font-size="9" fill="#5e5c64">parse_messages()</text>

  <!-- Arrows to Indexer -->
  <path d="M 140 280 L 350 330" stroke="#3584e4" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
  <path d="M 360 280 L 360 330" stroke="#26a269" stroke-width="2" fill="none" marker-end="url(#arrowgreen)"/>
  <path d="M 580 280 L 370 330" stroke="#e66100" stroke-width="2" fill="none" marker-end="url(#arroworange)"/>

  <!-- Layer 3: Indexer -->
  <text x="50" y="325" font-size="14" font-weight="bold" fill="#6e6d6b">Indexer</text>

  <rect x="240" y="330" width="240" height="70" fill="#fef9e7" rx="8" stroke="#f6d32d" stroke-width="3"/>
  <text x="360" y="355" text-anchor="middle" font-size="13" font-weight="bold" fill="#1c1c1c">SessionIndexer</text>
  <text x="360" y="375" text-anchor="middle" font-size="10" fill="#5e5c64">index_all_sessions()</text>
  <text x="360" y="390" text-anchor="middle" font-size="10" fill="#5e5c64">index_tool_sessions()</text>

  <!-- Arrow to Database -->
  <path d="M 360 400 L 360 440" stroke="#f6d32d" stroke-width="3" fill="none" marker-end="url(#arrowyellow)"/>

  <!-- Layer 4: Database -->
  <text x="50" y="435" font-size="14" font-weight="bold" fill="#6e6d6b">Storage</text>

  <rect x="180" y="440" width="180" height="100" fill="#e8e8e8" rx="8" stroke="#5e5c64" stroke-width="2"/>
  <text x="270" y="465" text-anchor="middle" font-size="12" font-weight="bold" fill="#1c1c1c">SQLite Database</text>
  <text x="270" y="485" text-anchor="middle" font-size="10" fill="#5e5c64">sessions</text>
  <text x="270" y="500" text-anchor="middle" font-size="9" fill="#9a9996">id, tool, project_path,</text>
  <text x="270" y="513" text-anchor="middle" font-size="9" fill="#9a9996">start_time, message_count</text>
  <text x="270" y="530" text-anchor="middle" font-size="10" fill="#5e5c64">messages (FTS5)</text>

  <rect x="400" y="440" width="180" height="100" fill="#e8e8e8" rx="8" stroke="#5e5c64" stroke-width="2"/>
  <text x="490" y="465" text-anchor="middle" font-size="12" font-weight="bold" fill="#1c1c1c">Search Engine</text>
  <text x="490" y="485" text-anchor="middle" font-size="10" fill="#5e5c64">FTS5 Full-Text Search</text>
  <text x="490" y="505" text-anchor="middle" font-size="9" fill="#9a9996">MATCH queries</text>
  <text x="490" y="520" text-anchor="middle" font-size="9" fill="#9a9996">Filter by tool/project</text>

  <!-- Arrows to UI Layer -->
  <path d="M 270 540 L 220 600" stroke="#5e5c64" stroke-width="2" fill="none" marker-end="url(#arrowgray)"/>
  <path d="M 490 540 L 420 600" stroke="#5e5c64" stroke-width="2" fill="none" marker-end="url(#arrowgray)"/>

  <!-- Layer 5: UI Components -->
  <text x="50" y="595" font-size="14" font-weight="bold" fill="#6e6d6b">UI (Relm4 + GTK4)</text>

  <rect x="50" y="600" width="140" height="80" fill="#d5e8ff" rx="8" stroke="#3584e4" stroke-width="2"/>
  <text x="120" y="625" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">SearchBar</text>
  <text x="120" y="645" text-anchor="middle" font-size="9" fill="#5e5c64">Search input</text>
  <text x="120" y="660" text-anchor="middle" font-size="9" fill="#5e5c64">Filter controls</text>

  <rect x="210" y="600" width="140" height="80" fill="#d5e8ff" rx="8" stroke="#3584e4" stroke-width="2"/>
  <text x="280" y="625" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">Sidebar</text>
  <text x="280" y="645" text-anchor="middle" font-size="9" fill="#5e5c64">Tool filters</text>
  <text x="280" y="660" text-anchor="middle" font-size="9" fill="#5e5c64">Project list</text>

  <rect x="370" y="600" width="140" height="80" fill="#d5e8ff" rx="8" stroke="#3584e4" stroke-width="2"/>
  <text x="440" y="625" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">SessionList</text>
  <text x="440" y="645" text-anchor="middle" font-size="9" fill="#5e5c64">List view</text>
  <text x="440" y="660" text-anchor="middle" font-size="9" fill="#5e5c64">Click to open</text>

  <rect x="530" y="600" width="140" height="80" fill="#d5e8ff" rx="8" stroke="#3584e4" stroke-width="2"/>
  <text x="600" y="625" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">SessionDetail</text>
  <text x="600" y="645" text-anchor="middle" font-size="9" fill="#5e5c64">Message view</text>
  <text x="600" y="660" text-anchor="middle" font-size="9" fill="#5e5c64">Resume button</text>

  <!-- Layer 6: Terminal -->
  <text x="750" y="595" font-size="14" font-weight="bold" fill="#6e6d6b">Actions</text>

  <rect x="730" y="600" width="220" height="80" fill="#f9e2af" rx="8" stroke="#f6d32d" stroke-width="2"/>
  <text x="840" y="625" text-anchor="middle" font-size="11" font-weight="bold" fill="#1c1c1c">Terminal Integration</text>
  <text x="840" y="645" text-anchor="middle" font-size="9" fill="#5e5c64">gnome-terminal --</text>
  <text x="840" y="660" text-anchor="middle" font-size="9" fill="#5e5c64">claude code resume &lt;id&gt;</text>

  <!-- Arrow from SessionDetail to Terminal -->
  <path d="M 670 640 L 730 640" stroke="#f6d32d" stroke-width="2" fill="none" marker-end="url(#arrowyellow)"/>

  <!-- Data Flow Labels -->
  <text x="750" y="140" font-size="11" fill="#9a9996">ğŸ“ Read session files</text>
  <text x="750" y="250" font-size="11" fill="#9a9996">ğŸ” Parse JSON â†’ Models</text>
  <text x="750" y="370" font-size="11" fill="#9a9996">ğŸ’¾ Index into SQLite</text>
  <text x="750" y="490" font-size="11" fill="#9a9996">ğŸ” Full-text search</text>
  <text x="750" y="640" font-size="11" fill="#9a9996">â–¶ï¸ Launch session</text>

  <!-- Bottom Notes -->
  <rect x="50" y="720" width="900" height="60" fill="#fafafa" rx="8" stroke="#d5d3d0" stroke-width="1"/>
  <text x="60" y="742" font-size="11" font-weight="bold" fill="#1c1c1c">Technology Stack:</text>
  <text x="70" y="760" font-size="10" fill="#5e5c64">â€¢ Rust + Relm4 (reactive UI)</text>
  <text x="240" y="760" font-size="10" fill="#5e5c64">â€¢ GTK4 + Libadwaita (GNOME HIG)</text>
  <text x="430" y="760" font-size="10" fill="#5e5c64">â€¢ SQLite + FTS5 (search)</text>
  <text x="620" y="760" font-size="10" fill="#5e5c64">â€¢ serde_json (parsing)</text>
  <text x="800" y="760" font-size="10" fill="#5e5c64">â€¢ walkdir (file discovery)</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3584e4"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#26a269"/>
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e66100"/>
    </marker>
    <marker id="arrowyellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#f6d32d"/>
    </marker>
    <marker id="arrowgray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#5e5c64"/>
    </marker>
  </defs>
</svg>
